
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart("smart-tab-item",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"propertyChangedHandler",value:function(e,a,r){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,a,r);var o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"closeButtonHidden":o.$.fireEvent("closeButtonVisibilityChange",{hidden:r});break;case"index":o.$.fireEvent("indexChange",{newIndex:r,oldIndex:a,tabItem:o});break;case"label":break;case"labelSize":o.$.fireEvent("labelSizeChange",{size:r})}}},{key:"_setIndex",value:function(e){var t=this,a=t.context;t.context=t,t.index=e,t.context=a}}],[{key:"properties",get:function(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}}]),t}(Smart.ContentElement)),Smart("smart-tab-items-group",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return""}},{key:"propertyChangedHandler",value:function(e,a,r){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,a,r);var o=this;if(o._preventPropertyChangedHandler)return void delete o._preventPropertyChangedHandler;switch(e){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:r})}}}],[{key:"properties",get:function(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}}]),t}(Smart.ContentElement)),Smart("smart-tabs",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="tabsHeaderSection" class="smart-tabs-header-section">\n                        <div id="tabsHeaderItems" class="smart-tabs-header-items">\n                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-spin-button smart-hidden">\n                                <div id="arrowNear" class="smart-arrow"></div>\n                            </smart-repeat-button>\n                            <div id="tabStrip" class="smart-tab-strip"></div>\n                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-spin-button smart-hidden">\n                                <div id="arrowFar" class="smart-arrow"></div>\n                            </smart-repeat-button>\n                            <div id="dropDownButton" class="smart-tabs-drop-down-button">\n                                <div id="dropDownButtonArrow" class="smart-tabs-drop-down-button-arrow smart-unselectable"></div>\n                                <div id="dropDownButtonDropDown" class="smart-tabs-drop-down-button-drop-down smart-hidden"></div>\n                            </div>\n                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>\n                        </div>\n                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>\n                    </div>\n                    <div id="tabContentSection" class="smart-tabs-content-section"><content></content></div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e._firefox=-1!==navigator.userAgent.indexOf("Firefox"),e._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},e._createElement()}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,a.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"appendChild"})),t.insert(t._tabs.length,{node:e})}},{key:"collapse",value:function(){var e=this;e.collapsible&&!e.collapsed&&(e.collapsed=!0)}},{key:"ensureVisible",value:function(e){var t=this;if(null!==e&&"wrap"!==t.tabLayout&&"shrink"!==t.tabLayout&&"hidden"!==t.tabPosition){t._validateIndex(e,"ensureVisible"),e=Math.max(0,Math.min(e,t._tabs.length-1));var a=t._tabs[e].group,r=t.$.tabStrip,o=r.getBoundingClientRect(),n=null===a?t._tabLabelContainers[e]:t._groupLabels[t._groups.indexOf(a)],i=n.getBoundingClientRect();"top"!==t.tabPosition&&"bottom"!==t.tabPosition||!(o.left>i.left||o.right<i.right)?"left"!==t.tabPosition&&"right"!==t.tabPosition||!(o.top>i.top||o.bottom<i.bottom)||(r.scrollTop+=i.bottom-r.offsetHeight-o.top):r.scrollLeft+=i.right-r.offsetWidth-o.left,t._updateScrollButtonVisibility(),t.resize&&t._getTabCoordinates()}}},{key:"expand",value:function(){var e=this;e.collapsible&&e.collapsed&&(e.collapsed=!1)}},{key:"getOffsetFromEdgeOfElement",value:function(e){var t=this;t._validateIndex(e,"getOffsetFromEdgeOfElement"),e=Math.max(0,Math.min(e,t._tabs.length-1));var a=t._tabs[e],r=t.tabPosition;return"hidden"!==r?Math.abs(a.getBoundingClientRect()[r]-t.getBoundingClientRect()[r]):a.getBoundingClientRect().top-t.getBoundingClientRect().top}},{key:"insert",value:function(e,t){var a=this,r=void 0,o=void 0;a._validateIndex(e,"insert"),(void 0===t||void 0===t.label&&void 0===t.content&&void 0===t.node)&&a.error(a.localize("detailsObjectRequired")),void 0===t.node?(r=t.group,o=document.createElement("smart-tab-item"),o.label=void 0!==t.label?t.label:"",o.labelSize=void 0!==t.labelSize?t.labelSize:null,o.content=t.content):o=t.node,o.$.addClass("smart-visibility-hidden"),o.group=null;var n=a._addTabLabelContainer(o),i=n.tabLabelContainer,l=n.dropDownLabelContainer;i.tab=o,o.tabLabelContainer=i;var s={index:e,tab:o,tabLabelContainer:i,dropDownLabelContainer:l};if(0===a._groups.length&&void 0===r)a._insertNoGrouping(s);else if(void 0!==r){s.group=r;var d=a.$.tabContentSection.querySelector('smart-tab-items-group[label="'+r+'"]');null!==d?(s.smartTabItemsGroup=d,a._insertIntoExistingGroup(s)):a._insertIntoNewGroup(s)}else a._insertNearAGroup(s);a._getReorderItems(),null===a.selectedIndex&&a._tabs.length&&a._select(0,!1),null!==o.group&&null!==o.labelSize&&"shrink"!==a.tabLayout&&i.style.removeProperty([a._orientationSettings.dimension]),a._applyTabOverflow()}},{key:"insertBefore",value:function(e,t){var a=this;if(!a.isCompleted){var r=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,r.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem&&(void 0===t||null===t||t instanceof Smart.TabItem)||a.error(a.localize("tabItemRequired",{method:"insertBefore"}));var o=void 0;a.contains(e)&&(e.selected&&(o=!0),a.remove(e.index)),void 0!==t&&null!==t?(a.contains(t)||a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(t.index,{node:e})):a.insert(a._tabs.length,{node:e}),o&&a._select(e.index,!1)}},{key:"remove",value:function(e){var t=this,a=t._tabs.length;if(0!==a){t._validateIndex(e,"remove"),e=Math.max(0,Math.min(e,a-1));var r=t._tabs[e],o=t._tabLabelContainers[e];if(o.parentElement.removeChild(o),r.parentElement.removeChild(r),null!==r.group){var n=t.$.tabContentSection.querySelector('smart-tab-items-group[label="'+r.group+'"]');if(0===n.childElementCount){var i=t._groups.indexOf(r.group);t.$.tabStrip.removeChild(t._groupLabels[i]),t._groups.splice(i,1),t.$.container.removeChild(t._groupLabels[0].dropDown),t._groupLabels.splice(i,1),t.$.tabContentSection.removeChild(n)}}a>1?e<t.selectedIndex?t.selectedIndex--:e===t.selectedIndex&&(e===a-1?t._select(e-1,!1):(t._select(e+1,!1),t.selectedIndex--)):(t.selectedIndex=null,t.$.tabContentSection.innerHTML=""),t._tabLabelContainers.splice(e,1),t.$.dropDownButtonDropDown.removeChild(t.$.dropDownButtonDropDown.children[e]),t._tabs.splice(e,1),t._updateTabIndexes(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,a.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e.index)}},{key:"select",value:function(e){var t=this;0!==t._tabs.length&&(t._validateIndex(e,"select"),e=Math.max(0,Math.min(e,t._tabs.length-1)),t.ensureVisible(e),t._select(e,!0))}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");(null===e.getAttribute("tabindex")||e.getAttribute("tabindex")<0)&&e.setAttribute("tabindex",0)}},{key:"update",value:function(e,t,a){var r=this;if(0!==r._tabs.length){r._validateIndex(e,"update"),e=Math.max(0,Math.min(e,r._tabs.length-1));var o=r._tabs[e];if(void 0!==t&&o.label!==t){var n=r._tabLabelContainers[e].firstElementChild.children[0],i=r.$.dropDownButtonDropDown.children[e];o.label=t,n.innerHTML="",i.innerHTML="",r._setLabel(t,n,i),r._applyTabOverflow()}void 0!==a&&(o.content=a)}}},{key:"_createElement",value:function(){var e=this;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),e._handlePosition(e.tabPosition),e._handleScrollButtonsPosition(e.scrollButtonsPosition,"both"),null!==e.dataSource&&e._processDataSource(),e._setFocusable(),e.collapsed&&!e.collapsible&&(e.collapsed=!1),e.$.scrollButtonNear.firstElementChild.tabIndex=-1,e.$.scrollButtonFar.firstElementChild.tabIndex=-1,e._processHTML()}},{key:"propertyChangedHandler",value:function(e,a,r){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,a,r);var o=this;switch(e){case"addNewTab":r?o._insertAddNewTab():(o.$.tabStrip.removeChild(o._addNewTab),delete o._addNewTab),o._applyTabOverflow();break;case"closeButtonMode":if("selected"===r){for(var n=0;n<o._tabs.length;n++)o._disableCloseButton(n);o._enableCloseButton(o.selectedIndex)}else{o._disableCloseButton(o.selectedIndex);for(var i=o._tabLabelContainers,l=0;l<i.length;l++){var s=i[l];s.closeButtonEnabled=!0!==o._tabs[l].closeButtonHidden,o._showCloseButton(s)}}o._applyTabOverflow();break;case"closeButtons":for(var d=o._tabLabelContainers,c=r?o._showCloseButton:o._hideCloseButton,u=0;u<d.length;u++){c(d[u])}o._applyTabOverflow();break;case"collapsed":if(!o.collapsible&&r)return void(o.collapsed=!1);break;case"collapsible":!r&&o.collapsed&&(o.collapsed=!1);break;case"dataSource":o.selectedIndex=null;for(var b=0;b<o._groupLabels.length;b++)o.$.container.removeChild(o._groupLabels[b].dropDown);o.$.tabStrip.innerHTML="",o._processDataSource(),o._processHTML();break;case"disabled":o._setFocusable(),o.$.scrollButtonNear.disabled=r,o.$.scrollButtonFar.disabled=r,r||o._updateScrollButtonVisibility(),o._closeDropDownButtonDropDown();break;case"messages":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==o.tabLayout)return;o.$.tabStrip.scrollLeft=0,o.$.tabStrip.scrollTop=0,"hidden"===r?(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")):o._checkOverflowScroll(),o._getTabCoordinates();break;case"tabPosition":if(o._closeGroupDropDown(),o._handlePosition(r,a),"shrink"!==o.tabLayout&&o._applyLabelSizes("tabPosition"),o._applyTabOverflow(),"hidden"!==r)for(var p=o.getElementsByClassName("smart-tab-group-arrow"),m=0;m<p.length;m++)p[m].innerHTML=o._arrowCodes[o.tabPosition];break;case"resize":r&&o._getTabCoordinates();break;case"scrollButtonsPosition":o._handleScrollButtonsPosition(r,a);break;case"selectedIndex":if(null===r)return void(o.selectedIndex=a);var h=Math.max(0,Math.min(r,o._tabs.length-1));o.ensureVisible(h),o._select(h,!0,a);break;case"tabLayout":"scroll"===a&&(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")),"shrink"===r?o._applyLabelSizes("shrink",!0):"shrink"===a&&o._applyLabelSizes("shrink",!1),o._applyTabOverflow(),"scroll"===r&&o.disabled&&(o.$.scrollButtonNear.disabled=!0,o.$.scrollButtonFar.disabled=!0),o.ensureVisible(o.selectedIndex);break;case"tabTextOrientation":o._applyTabOverflow(),o.ensureVisible(o.selectedIndex);break;case"unfocusable":o._setFocusable()}}},{key:"_addGroupContainer",value:function(e,t){var a=this,r=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");return r.className="smart-tab-group-container smart-unselectable",r.$=Smart.Utilities.Extend(r),o.className="smart-tab-label-text-wrapper",null!==t&&"shrink"!==a.tabLayout&&(r.style[a._orientationSettings.dimension]=parseInt(t,10)+"px"),n.className="smart-tab-label-text-container",n.innerHTML=e,i.className="smart-tab-group-arrow",i.innerHTML=a._arrowCodes[a.tabPosition],l.className="smart-tab-group-drop-down smart-hidden",l.$=Smart.Utilities.Extend(l),o.appendChild(n),o.appendChild(i),r.appendChild(o),a.$.container.appendChild(l),r.group=e,r.dropDown=l,l.groupContainer=r,{label:r,dropDown:l}}},{key:"_addGroupElements",value:function(e){var t=this,a=e.groups,r=e.groupLabels,o=e.group,n=a.indexOf(o),i=e.tabLabelContainer,l=void 0;if(-1!==n)l=r[n],l.dropDown.appendChild(i);else{a.push(o);var s=t._addGroupContainer(o,e.smartTabItemsGroup.labelSize),d=s.dropDown;l=s.label,d.appendChild(i),e.documentFragment.appendChild(l),r.push(l)}t.selectedIndex===e.i&&(t._selectedGroup=l,l.$.addClass("smart-tab-group-selected"))}},{key:"_addNewTabHandler",value:function(e,t,a){var r=this;r._swiping||(a?(e.$.removeClass("smart-tab-hovered"),r.insert(r._tabs.length,{label:"New Tab",content:""}),r._select(r._tabs.length-1,!0)):r._reordering||r._swiping||("mouseover"===t?e.$.addClass("smart-tab-hovered"):"mouseout"===t&&e.$.removeClass("smart-tab-hovered")))}},{key:"_addTabLabelContainer",value:function(e,t){var a=this,r=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),l=void 0;return r.className="smart-tab-label-container smart-unselectable",o.className="smart-tab-label-text-wrapper",n.className="smart-tab-label-text-container",i.className="smart-tab-close-button",i.innerHTML="×",void 0===t?(a.closeButtons?"default"===a.closeButtonMode&&e.closeButtonHidden||"selected"===a.closeButtonMode&&!e.selected?(i.classList.add("smart-hidden"),r.closeButtonEnabled=!1):(n.classList.add("smart-close-button-enabled"),r.closeButtonEnabled=!0):(i.classList.add("smart-hidden"),r.closeButtonEnabled=!0),l=document.createElement("div"),l.className="smart-tab-label-container smart-unselectable",null===e.group&&null!==e.labelSize&&"shrink"!==a.tabLayout&&(r.style[a._orientationSettings.dimension]=parseInt(e.labelSize,10)+"px")):(i.classList.add("smart-hidden"),r.closeButtonEnabled=!1),a._setLabel(e?e.label:"+",n,l),n.$=Smart.Utilities.Extend(n),i.$=Smart.Utilities.Extend(i),o.appendChild(n),o.appendChild(i),r.appendChild(o),r.$=Smart.Utilities.Extend(r),{tabLabelContainer:r,dropDownLabelContainer:l}}},{key:"_animateSelection",value:function(e,t,a){var r=this,o="right",n="left";r._animatedTab=e,r._animatedOldTab=t,"left"!==r.tabPosition&&"right"!==r.tabPosition||(o="top",n="bottom");for(var i=0;i<r._tabs.length;i++)r._tabs[i].$.removeClass(o),r._tabs[i].$.removeClass(n),r._tabs[i].$.removeClass("animate");a?(e.$.addClass(o),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(n),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(o),r._animatedOldTab.classToRemove=n):(e.$.addClass(n),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(o),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(n),r._animatedOldTab.classToRemove=o)}},{key:"_applyConditionalTabOverflow",value:function(){var e=this,t="left"===e.tabPosition||"right"===e.tabPosition,a=e.$.tabStrip;if("scroll"===e.tabLayout)return void e._checkOverflowScroll();if(e._firefox&&"shrink"===e.tabLayout&&t&&a.scrollHeight>a.offsetHeight){for(var r=a.children,o=100/r.length+"%",n=0;n<r.length;n++)r[n].style.height=o,r[n].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");e._inlineStyleTabStripChildren=!0}}},{key:"_applyLabelSizes",value:function(e,t){for(var a=this,r=a._orientationSettings.dimension,o="width"===r?"height":"width",n=0;n<a._reorderItems.length;n++){var i=a._reorderItems[n],l=a._getCorrespondingCustomElement(i);null!==l.labelSize&&("tabPosition"===e&&i.style.removeProperty(o),t?i.style.removeProperty(r):i.style[r]=parseInt(l.labelSize,10)+"px")}}},{key:"_applyTabOverflow",value:function(){var e=this,t=e.tabLayout,a=e.tabPosition,r="left"===a||"right"===a,o=e.$.tabStrip;switch(e._removeInlineStyle(),t){case"scroll":case"dropdown":e._firefox&&"vertical"===e.tabTextOrientation&&r&&e._fixTabStripFirefox(o);break;case"wrap":if("vertical"===e.tabTextOrientation)if(e._firefox)if(r)e._fixTabStripFirefox(o);else{for(var n=o.children,i=n[0].offsetHeight,l=1;l<n.length;l++)i=Math.max(i,n[l].offsetHeight);for(var s=1;s<n.length;s++)n[s].style.height=i+"px";e._inlineStyleTabStripChildren=!0}else r||o.scrollHeight>o.offsetHeight&&(o.style.height=o.scrollHeight+"px","bottom"===a&&(o.style.flexWrap="wrap-reverse"),e._inlineStyleTabStrip=!0);else r&&o.scrollWidth>o.offsetWidth&&(o.style.width=o.scrollWidth+"px","right"===a&&(o.style.flexWrap="wrap-reverse"),e._inlineStyleTabStrip=!0);break;case"shrink":if(r){if(e._firefox&&"vertical"===e.tabTextOrientation){for(var d=o.children,c=window.getComputedStyle(d[0]),u=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),b=0,p=0;p<d.length;p++)b=Math.max(b,d[p].firstElementChild.firstElementChild.offsetWidth);o.style.width=u+b+"px",e._inlineStyleTabStrip=!0;break}}else o.scrollWidth>o.offsetWidth&&o.$.addClass("shrink-tabs")}e._applyConditionalTabOverflow(),e._getTabCoordinates(),e._fixTabStripFlex()}},{key:"_checkOverflowScroll",value:function(){var e=this,t=e.$tabsHeaderSection,a=e.$.tabStrip,r=e.overflow;if("hidden"!==r){var o=void 0,n=void 0,i=void 0;"left"!==e.tabPosition&&"right"!==e.tabPosition?(o=Math.round(a.scrollWidth)>Math.round(a.offsetWidth),n=Math.round(a.scrollLeft)>0,i=Math.round(a.offsetWidth+a.scrollLeft)<Math.round(a.scrollWidth)):(o=Math.round(a.scrollHeight)>Math.round(a.offsetHeight),n=Math.round(a.scrollTop)>0,i=Math.round(a.offsetHeight+a.scrollTop)<Math.round(a.scrollHeight)),"scroll"===r&&(t.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden")),o?"auto"===r?(t.hasClass("scroll-buttons-shown")||t.addClass("scroll-buttons-shown"),n?e.$scrollButtonNear.removeClass("smart-hidden"):e.$scrollButtonNear.addClass("smart-hidden"),i?e.$scrollButtonFar.removeClass("smart-hidden"):e.$scrollButtonFar.addClass("smart-hidden"),!1===(n&&i)?t.addClass("one-button-shown"):t.removeClass("one-button-shown"),e.disabled||(e.$.scrollButtonNear.disabled=!1,e.$.scrollButtonFar.disabled=!1)):(t.removeClass("one-button-shown"),e.disabled?(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0):(e.$.scrollButtonNear.disabled=!n,e.$.scrollButtonFar.disabled=!i)):!o&&"auto"===r&&t.hasClass("scroll-buttons-shown")?(t.removeClass("scroll-buttons-shown"),t.removeClass("one-button-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden")):o||"scroll"!==r||(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0)}}},{key:"_closeButtonVisibilityChangeHandler",value:function(e){var t=this,a=e.target.index;if("selected"===t.closeButtonMode)return void(t._tabLabelContainers[a].closeButtonEnabled=e.detail.hidden);e.detail.hidden?t._disableCloseButton(a):t._enableCloseButton(a)}},{key:"_closeDropDownButtonDropDown",value:function(){var e=this;e._dropDownButtonDropDownOpened&&(e.$dropDownButtonDropDown.addClass("smart-hidden"),e._dropDownButtonDropDownOpened=!1)}},{key:"_closeGroupDropDown",value:function(){var e=this;e._openDropDown&&(e._openDropDown.rippleInProgress?setTimeout(function(){e._openDropDown&&(e._openDropDown.$.addClass("smart-hidden"),delete e._openDropDown.rippleInProgress,e._openDropDown=void 0)},450):(e._openDropDown.$.addClass("smart-hidden"),e._openDropDown=void 0))}},{key:"_containerHandler",value:function(e){var t=this,a=e.type;if(!(t.disabled||t.readonly||t._resizing&&"mouseout"!==a)&&("down"!==a&&"up"!==a||1===e.which||Smart.Utilities.Core.isMobile)){"up"===a&&e.stopPropagation();var r=e.originalEvent?e.originalEvent.target:e.target;if(!t.$.tabContentSection.contains(r))return t.$.dropDownButton.contains(r)?void t._dropDownButtonHandler(r,e):void t._tabStripHandler(r,e)}}},{key:"_disableCloseButton",value:function(e){var t=this,a=t._tabLabelContainers[e];a.closeButtonEnabled=!1,t.closeButtons&&t._hideCloseButton(a)}},{key:"_documentMoveHandler",value:function(e){var t=this,a=t._orientationSettings;if(t._reordering){t._reorderStartThrown||(t._fireDragEvent(e,"reorderStart"),t._reorderStartThrown=!0);for(var r=e[a.coordinate],o="wrap"!==t.tabLayout?function(e){return r>=e[a.from]&&r<=e[a.to]}:function(t){return e.pageX>=t.fromX&&e.pageX<=t.toX&&e.pageY>=t.fromY&&e.pageY<=t.toY},n=!1,i=0;i<t._tabCoordinates.length;i++){if(o(t._tabCoordinates[i])){n=i;break}}!0!==t._preventReorder&&!1!==n&&n!==t._draggedIndex&&(t._reorderTabs(t._draggedIndex,n),t._closeGroupDropDown(),t._draggedIndex=n,t._getReorderItems(),t._getTabCoordinates());var l=t._tabCoordinates[t._draggedIndex];"wrap"!==t.tabLayout&&(r<l[a.from]||r>l[a.to])||"wrap"===t.tabLayout&&(null!==e.originalEvent.target.closest(".smart-tab-label-container")||null!==e.originalEvent.target.closest(".smart-tab-group-container"))&&!(e.pageX>=l.fromX&&e.pageX<=l.toX&&e.pageY>=l.fromY&&e.pageY<=l.toY)?t._preventReorder=!0:t._preventReorder=!1}else t._resizing&&(t.$.resizeToken.style[a.edge]=e[a.coordinate]-t._tabsHeaderSectionCoordinate+"px",t.$resizeToken.removeClass("smart-hidden"))}},{key:"_documentUpHandler",value:function(e){var t=this,a=e.originalEvent.target;t._endSwiping(e,Date.now()),!t._openDropDown||t._openDropDown.rippleInProgress||a!==document&&a.closest(".smart-tab-group-container")===t._openDropDown.groupContainer||t._closeGroupDropDown(),t.$.dropDownButton.contains(a)||t._closeDropDownButtonDropDown(),t._endReordering(e,a),t._resize(e),void 0!==t._tabToResize&&(t._tabToResize=void 0)}},{key:"_dropDownButtonHandler",value:function(e,t){var a=this,r=t.type;if(a.$.dropDownButtonDropDown.contains(e)){if(e.classList.contains("smart-tab-label-container"))switch(r){case"down":a._downTarget=e;break;case"mouseout":e.classList.remove("smart-tab-hovered");break;case"mouseover":e.classList.add("smart-tab-hovered");break;case"up":e===a._downTarget&&(a.select(Array.from(a.$.dropDownButtonDropDown.children).indexOf(e)),a._closeDropDownButtonDropDown())}}else"down"===r?a._downTarget=a.$.dropDownButton:"up"===r&&a._downTarget===a.$.dropDownButton&&(a._dropDownButtonDropDownOpened?a._closeDropDownButtonDropDown():(a.$dropDownButtonDropDown.removeClass("smart-hidden"),a._dropDownButtonDropDownOpened=!0))}},{key:"_enableCloseButton",value:function(e){var t=this,a=t._tabLabelContainers[e];a.closeButtonEnabled=!0,t.closeButtons&&t._showCloseButton(a)}},{key:"_endReordering",value:function(e,t){var a=this;a._reordering&&(a._draggedHoveredTab&&(a._draggedHoveredTab.contains(t)||a._draggedHoveredTab.$.removeClass("smart-tab-hovered"),delete a._draggedHoveredTab),a._reorderedIndex=void 0,a._reordering=!1,a._reorderStartThrown=!1,a.removeAttribute("dragged"),e&&a._fireDragEvent(e,"reorderEnd"))}},{key:"_endSwiping",value:function(e,t){var a=this;if(a._dragStartDetails){var r=a._orientationSettings,o=a.$.tabStrip,n=Math.abs(a._dragStartDetails.startTime-t),i=200/n,l=(a._dragStartDetails[r.startCoordinate]-e[r.coordinate])*i,s=Math.abs(l),d=function(){return!(l>0&&o[r.scrollDirection]===o[r.scrollSize]-o[r.size]||l<0&&0===o[r.scrollDirection])},c=.03*Math.abs(l)*i,u=function e(){if(c>5){var t=(s-c)/Math.abs(l);t<.1?c/=1.25:t<.15?c/=1.2:t<.2?c/=1.15:t<.25?c/=1.1:t<.3&&(c/=1.05)}var n=o[r.scrollDirection];o[r.scrollDirection]=l>0?Math.min(n+c,o[r.scrollSize]-o[r.size]):Math.max(n-c,0),s-=c,a._updateScrollButtonVisibility();var i=d();s>0&&i?a._scrollingAnimationFrame=window.requestAnimationFrame(e):a._wheelInProgress=!1};a._scrollingAnimationFrame&&cancelAnimationFrame(a._scrollingAnimationFrame),n<500&&d()?a._scrollingAnimationFrame=window.requestAnimationFrame(u):a._wheelInProgress=!1,delete a._dragStartDetails,a._swiping&&delete a._swiping}}},{key:"_fireDragEvent",value:function(e,t){var a=this,r=a.$.tabStrip.children[a._draggedIndex],o=r.tab,n=void 0,i=void 0,l=void 0;o?(n=o.selected,i=o.index,l=o.label):l=r.group,a.$.fireEvent(t,{position:{left:e.pageX,top:e.pageY},target:r,selected:n,index:i,label:l})}},{key:"_fixTabStripFirefox",value:function(e){for(var t=this,a=t.$.tabStrip.children,r=a[0].getBoundingClientRect(),o=r.left,n=o+a[0].offsetWidth,i=1;i<a.length;i++)r=a[i].getBoundingClientRect(),o=Math.min(o,r.left),n=Math.max(n,r.left+a[i].offsetWidth);e.style.width=n-o+"px",t._inlineStyleTabStrip=!0}},{key:"_fixTabStripFlex",value:function(){var e=this;"vertical"!==e.tabTextOrientation||"left"!==e.tabPosition&&"right"!==e.tabPosition||e._firefox||setTimeout(function(){e.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){e.$tabsHeaderSection.removeClass("smart-hidden"),e._getTabCoordinates()},0)},0)}},{key:"_getCorrespondingCustomElement",value:function(e){return e.$.hasClass("smart-tab-label-container")?e.tab:this.$.tabContentSection.querySelector('smart-tab-items-group[label="'+e.group+'"]')}},{key:"_getReorderItems",value:function(){var e=this,t=void 0;0===e._groups.length?t=e._tabLabelContainers:(t=Array.from(e.$.tabStrip.children),e.addNewTab&&t.pop()),e._reorderItems=t}},{key:"_getTabCoordinates",value:function(){var e=this;if((e.reorder||e.resize)&&"hidden"!==e.tabPosition){for(var t=[],a=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset,o=0;o<e._reorderItems.length;o++){var n=e._reorderItems[o],i=n.getBoundingClientRect();t.push({fromX:i.left+a,toX:i.right+a,fromY:i.top+r,toY:i.bottom+r})}e._tabCoordinates=t}}},{key:"_getTabs",value:function(){var e=this,t=e.getElementsByTagName("smart-tab-item");null!==e.selectedIndex&&(0===t.length?e.selectedIndex=null:e.selectedIndex=Math.max(0,Math.min(e.selectedIndex,t.length-1))),e._tabs=Array.from(t)}},{key:"_groupContainerHandler",value:function(e,t){var a=this,r=e.dropDown;if("down"===t)return a._downTarget=e,void(a.reorder&&a._reorderItems.length>1&&(a._getTabCoordinates(),a._reordering=!0,a.setAttribute("dragged",""),a._draggedIndex=Array.from(a.$.tabStrip.children).indexOf(e)));a._reordering||a._swiping||(r===a._openDropDown||"mouseover"!==t||e.classList.contains("smart-tab-group-selected")?"mouseout"===t&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered")),"up"!==t||a._downTarget!==e||void 0!==a._reorderedIndex||a._swiping||(r===a._openDropDown?(a._closeGroupDropDown(),e.classList.contains("smart-tab-group-selected")||e.$.addClass("smart-tab-hovered")):(a._openDropDown&&a._openDropDown.$.addClass("smart-hidden"),r.$.removeClass("smart-hidden"),a._positionGroupDropDown(r,e),a._openDropDown=r,e.$.removeClass("smart-tab-hovered")))}},{key:"_handlePosition",value:function(e,t){var a=this;-1===[void 0,"top","left","hidden"].indexOf(t)||"bottom"!==e&&"right"!==e?"bottom"!==t&&"right"!==t||-1===["top","left","hidden"].indexOf(e)||a.$.container.insertBefore(a.$.tabsHeaderSection,a.$.tabContentSection):a.$.container.insertBefore(a.$.tabContentSection,a.$.tabsHeaderSection),"top"===e||"bottom"===e?(a._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},a.removeAttribute("vertical"),a.setAttribute("horizontal",""),a.$arrowNear.removeClass("smart-arrow-up"),a.$arrowNear.addClass("smart-arrow-left"),a.$arrowFar.removeClass("smart-arrow-down"),a.$arrowFar.addClass("smart-arrow-right")):(a._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},a.removeAttribute("horizontal"),a.setAttribute("vertical",""),a.$arrowNear.removeClass("smart-arrow-left"),a.$arrowNear.addClass("smart-arrow-up"),a.$arrowFar.removeClass("smart-arrow-right"),a.$arrowFar.addClass("smart-arrow-down")),a.$.dropDownButtonArrow.innerHTML=a._arrowCodes[a.tabPosition]}},{key:"_handleScrollButtonsPosition",value:function(e,t){var a=this,r=a.$.tabsHeaderItems;e!==t&&("both"===e?"near"===t?r.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton):r.insertBefore(a.$.scrollButtonNear,a.$.tabStrip):"near"===e?("far"===t&&r.insertBefore(a.$.scrollButtonNear,a.$.tabStrip),r.insertBefore(a.$.scrollButtonFar,a.$.tabStrip)):("near"===t&&r.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton),r.insertBefore(a.$.scrollButtonNear,a.$.scrollButtonFar)))}},{key:"_hideCloseButton",value:function(e){e.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.addClass("smart-hidden")}},{key:"_indexChangeHandler",value:function(e){var t=this,a=e.detail.oldIndex,r=Math.max(0,Math.min(e.detail.newIndex,t._tabs.length-1));if(a!==r){if(0===t._groups.length)t._reorderTabs(a,r);else{var o=e.detail.tabItem;o._setIndex(a),t.remove(a),t.insert(r,{node:o}),t.selectedIndex===a&&t._select(r,!1)}t._reorderedIndex=void 0}}},{key:"_insertAddNewTab",value:function(){var e=this,t=e._addTabLabelContainer(void 0,!0).tabLabelContainer;t.$.addClass("smart-add-new-tab"),e.$.tabStrip.appendChild(t),e._addNewTab=t}},{key:"_insertIntoExistingGroup",value:function(e){var t=this,a=e.smartTabItemsGroup,r=e.tab,o=e.tabLabelContainer,n=e.group,i=t._groupLabels[t._groups.indexOf(n)],l=i.dropDown,s=e.index;s=Math.max(0,Math.min(s,a.childElementCount)),l.insertBefore(o,l.children[s]);var d=a.children[s],c=void 0;c=d?d.index:a.children[s-1].index+1,a.insertBefore(r,d),t._tabLabelContainers.splice(c,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[c]||null),t._tabs.splice(c,0,r),s=c,r.group=n,t._updateIndexes(s)}},{key:"_insertIntoNewGroup",value:function(e){var t=this,a=e.tab,r=e.tabLabelContainer,o=e.group,n=t._addGroupContainer(o),i=n.label;n.dropDown.appendChild(r),t._groups.push(o);var l=Math.max(0,Math.min(e.index,t.$.tabStrip.childElementCount)),s=l;t._addNewTab&&s===t.$.tabStrip.childElementCount&&s--,t.$.tabStrip.insertBefore(i,t.$.tabStrip.children[s]||null),t._groupLabels.push(i);var d=document.createElement("smart-tab-items-group");d.appendChild(a),t.$.tabContentSection.insertBefore(d,t.$.tabContentSection.children[l]),d.label=o;var c=d.previousElementSibling,u=0;c&&(u=c instanceof Smart.TabItem?c.index+1:c.lastElementChild.index+1),t._tabLabelContainers.splice(u,0,r),
t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[u]||null),t._tabs.splice(u,0,a),l=u,a.group=o,t._updateIndexes(l)}},{key:"_insertNearAGroup",value:function(e){var t=this,a=e.tab,r=e.tabLabelContainer,o=e.index;o=Math.max(0,Math.min(o,t._tabs.length));var n=t._tabs[o-1],i=t._tabs[o],l=i?i.group:void 0;n&&null!==n.group&&i&&null!==l?(i.tabLabelContainer.parentElement.insertBefore(r,i.tabLabelContainer),i.parentElement.insertBefore(a,i),a.group=l):i?null!==l?(t.$.tabStrip.insertBefore(r,t._groupLabels[t._groups.indexOf(l)]),t.$.tabContentSection.insertBefore(a,t.$.tabContentSection.querySelector('smart-tab-items-group[label="'+l+'"]'))):(t.$.tabStrip.insertBefore(r,i.tabLabelContainer),t.$.tabContentSection.insertBefore(a,i)):(t.$.tabStrip.insertBefore(r,t._addNewTab||null),t.$.tabContentSection.appendChild(a)),t._tabLabelContainers.splice(o,0,r),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[o]||null),t._tabs.splice(o,0,a),t._updateIndexes(o)}},{key:"_insertNoGrouping",value:function(e){var t=this,a=Math.max(0,Math.min(e.index,t._tabs.length)),r=e.tab,o=e.tabLabelContainer;t.$.tabStrip.insertBefore(o,t._tabLabelContainers[a]||t._addNewTab||null),t.$.tabContentSection.insertBefore(r,t._tabs[a]||null),t._tabLabelContainers.splice(a,0,o),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[a]||null),t._tabs.splice(a,0,r),t._updateIndexes(a)}},{key:"_keydownHandler",value:function(e){var t=this,a=e.key;if(document.activeElement===t&&-1!==["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"].indexOf(a)&&!t.disabled&&!t.readonly&&"none"!==t.selectionMode&&null!==t.selectedIndex){e.preventDefault();var r=t._tabs.length-1,o=void 0;switch(a){case"ArrowLeft":case"ArrowUp":if(0===t.selectedIndex)return;o=t.selectedIndex-1;break;case"ArrowRight":case"ArrowDown":if(t.selectedIndex===r)return;o=t.selectedIndex+1;break;case"End":if(t.selectedIndex===r)return;o=r;break;case"Home":if(0===t.selectedIndex)return;o=0}t.select(o)}}},{key:"_labelContainerHandler",value:function(e,t,a){var r=this,o="up"===a&&r._downTarget===e;if("down"===a&&(r._downTarget=e,"click"===r.selectionMode&&e!==r._addNewTab))if(Smart.Utilities.Core.isMobile&&null===e.tab.group){var n=r.$.tabStrip[r._orientationSettings.scrollDirection];setTimeout(function(){if(n===r.$.tabStrip[r._orientationSettings.scrollDirection]){r._ripple(t,e)&&r._openDropDown&&r._openDropDown.contains(e)&&(r._openDropDown.rippleInProgress=!0)}},100)}else{var i=r._ripple(t,e);i&&r._openDropDown&&r._openDropDown.contains(e)&&(r._openDropDown.rippleInProgress=!0)}if(e===r._addNewTab)return void r._addNewTabHandler(e,a,o);var l=e.tab.index,s=!(r._reordering&&void 0!==r._reorderedIndex);o&&l===r.selectedIndex&&(r._closeGroupDropDown(),s&&null===e.tab.group&&r._toggleCollapsedState()),!r._swiping&&(s&&"click"===r.selectionMode&&o||!r._reordering&&(r.selectionMode===a||"mouseenter"===r.selectionMode&&"mouseover"===a))&&r._select(l,!0),r._reordering||r._swiping||"click"!==r.selectionMode&&"dblclick"!==r.selectionMode||("mouseover"!==a||e.$.hasClass("smart-tab-selected")?"mouseout"===a&&e.$.removeClass("smart-tab-hovered"):e.$.addClass("smart-tab-hovered")),r.reorder&&"down"===a&&null===e.tab.group&&r._reorderItems.length>1&&(r._getTabCoordinates(),r._reordering=!0,r.setAttribute("dragged",""),e.$.hasClass("smart-tab-hovered")&&(r._draggedHoveredTab=e),0===r._groups.length?r._draggedIndex=e.tab.index:r._draggedIndex=Array.from(r.$.tabStrip.children).indexOf(e))}},{key:"_labelSizeChangeHandler",value:function(e){var t=this,a=e.detail.size,r=void 0;"shrink"!==t.tabLayout&&(r=e.target instanceof Smart.TabItem?e.target.tabLabelContainer:t._groupLabels[t._groups.indexOf(e.target.label)],null!==a?r.style[t._orientationSettings.dimension]=parseInt(a,10)+"px":r.style.removeProperty(t._orientationSettings.dimension),t._applyTabOverflow())}},{key:"_orderTabs",value:function(){var e=this,t=e.getElementsByTagName("smart-tab-items-group"),a=[],r=[],o=!0,n=!1;if(0===t.length)for(var i=0;i<e._tabs.length;i++){var l=e._tabs[i],s=l.index;if(o&&null!==s&&(o=!1),-1!==a.indexOf(s||0)&&(n=!0,null!==s))break;a.push(s||0),r.push({tab:l,index:s})}if(!n){var d=a.slice(0).sort(function(e,t){return e-t});JSON.stringify(a)===JSON.stringify(d)&&(o=!0)}if(o||n){o||console.warn(e.localize("ambiguousIndexes"));for(var c=0;c<e._tabs.length;c++)e._tabs[c]._setIndex(c)}else{r.sort(function(e,t){return e.index-t.index});for(var u=0;u<r.length;u++){var b=r[u].tab;b._setIndex(u),e.$.tabContentSection.removeChild(b)}for(var p=0;p<r.length;p++){var m=r[p].tab;e.$.tabContentSection.appendChild(m),e._tabs[p]=m}}}},{key:"_populateTabStrip",value:function(){for(var e=this,t=document.createDocumentFragment(),a=[],r=[],o=[],n=0;n<e._tabs.length;n++){var i=e._tabs[n],l=i.parentElement,s=l instanceof Smart.TabItemsGroup?l.label:null;i.group=s;var d=e._addTabLabelContainer(i),c=d.tabLabelContainer,u=d.dropDownLabelContainer;e.selectedIndex===n&&c.$.addClass("smart-tab-selected"),i.tabLabelContainer=c,c.tab=i,a.push(c),null===s?t.appendChild(c):e._addGroupElements({documentFragment:t,groups:r,groupLabels:o,i:n,group:s,tabLabelContainer:c,smartTabItemsGroup:l}),e.$.dropDownButtonDropDown.appendChild(u)}e.$.tabStrip.appendChild(t),e._tabLabelContainers=a,e._groups=r,e._groupLabels=o}},{key:"_positionGroupDropDown",value:function(e,t){var a=this,r=a.tabPosition;if("top"===r||"bottom"===r){var o=-1!==a.className.indexOf("material");if(e.style.left=t.offsetLeft-a.$.tabStrip.scrollLeft+"px","top"===r)o||(e.style.top=t.offsetTop+t.offsetHeight+"px");else{var n=t.getBoundingClientRect().top-a.$.container.getBoundingClientRect().top;o&&(n+=a.$.tabStrip.offsetHeight),e.style.top=n+"px"}}else e.style.top=t.offsetTop-a.$.tabStrip.scrollTop+"px",e.style.left="left"===r?t.offsetLeft+t.offsetWidth+"px":t.getBoundingClientRect().left-a.$.container.getBoundingClientRect().left+"px"}},{key:"_processDataSource",value:function(){function e(t,a){var r=void 0;if(t.items instanceof Array&&t.items.length>0){r=document.createElement("smart-tab-items-group");for(var o=0;o<t.items.length;o++)t.items[o].items||e(t.items[o],r)}else r=document.createElement("smart-tab-item"),!0===t.closeButtonHidden&&(r.closeButtonHidden=!0),void 0!==t.content&&(r.innerHTML=t.content),void 0!==t.index&&(r.index=t.index),!0===t.selected&&(r.selected=t.selected);void 0!==t.label&&(r.label=t.label),void 0!==t.labelSize&&(r.labelSize=t.labelSize),a.appendChild(r)}var t=this,a=t.dataSource;t.$.tabContentSection.innerHTML="";for(var r=0;r<a.length;r++){e(a[r],t.$.tabContentSection)}}},{key:"_processHTML",value:function(){var e=this;e._getTabs(),e._orderTabs(),e._validateInitialSelection(),e._populateTabStrip(),e.addNewTab&&e._insertAddNewTab(),e._getReorderItems(),e._applyTabOverflow(),e.ensureVisible(e.selectedIndex)}},{key:"_removeInlineStyle",value:function(){var e=this,t=e.$.tabStrip;if(e._inlineStyleTabStripChildren){for(var a=t.children,r=0;r<a.length;r++)a[r].removeAttribute("style"),a[r].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete e._inlineStyleTabStripChildren}e._inlineStyleTabStrip&&(t.removeAttribute("style"),delete e._inlineStyleTabStrip),t.$.removeClass("shrink-tabs")}},{key:"_reorderTabs",value:function(e,t){function a(e,t,a){var r=e[t];e.splice(t,1),e.splice(a,0,r)}var r=this;if(0===r._groups.length){var o=r._tabs,n=r._tabLabelContainers,i=e>t?t:t+1;r.selectedIndex===e?r.selectedIndex=t:r.selectedIndex<=t&&r.selectedIndex>e?r.selectedIndex--:r.selectedIndex>=t&&r.selectedIndex<e&&r.selectedIndex++;var l=void 0;l=n[i]?n[i]:r.addNewTab?r._addNewTab:null,r.$.tabStrip.insertBefore(n[e],l),r.$.dropDownButtonDropDown.insertBefore(r.$.dropDownButtonDropDown.children[e],r.$.dropDownButtonDropDown.children[i]||null),r.$.tabContentSection.insertBefore(o[e],o[i]||null),a(o,e,t),a(n,e,t),r._updateTabIndexes()}else r._reorderTabsGrouping(e,t);r.$.fireEvent("reorder",{newIndex:t,originalIndex:e}),r._reorderedIndex=t}},{key:"_reorderTabsGrouping",value:function(e,t){var a=this,r=a.$.tabStrip.children,o=a.$.tabContentSection.children,n=e>t?t:t+1,i=a._tabs[a.selectedIndex];a.$.tabStrip.insertBefore(r[e],r[n]||null),a.$.tabContentSection.insertBefore(o[e],o[n]||null),a._groupLabels=Array.from(a.$.tabStrip.getElementsByClassName("smart-tab-group-container")),a._groups=[];for(var l=0;l<a._groupLabels.length;l++)a._groups.push(a._groupLabels[l].group);a._tabs=Array.from(a.$.tabContentSection.getElementsByTagName("smart-tab-item"));for(var s=document.createDocumentFragment(),d=[],c=0;c<a._tabs.length;c++)s.appendChild(a.$.dropDownButtonDropDown.children[a._tabs[c].index].cloneNode(!0));a.$.dropDownButtonDropDown.innerHTML="",a.$.dropDownButtonDropDown.appendChild(s);for(var u=0;u<a.$.tabStrip.childElementCount;u++){var b=a.$.tabStrip.children[u];b.$.hasClass("smart-tab-label-container")&&b!==a._addNewTab?d.push(b):b.$.hasClass("smart-tab-group-container")&&(d=d.concat(Array.from(b.dropDown.children)))}a._tabLabelContainers=d,a._updateTabIndexes(),i&&(a.selectedIndex=i.index)}},{key:"_resize",value:function(e){var t=this;if(t._resizing){var a=t._orientationSettings,r=e[a.coordinate]-t._resizeFrom,o=t._getCorrespondingCustomElement(t._tabToResize),n=void 0;n=null===o.labelSize?t._tabToResize[a.size]:o.labelSize;var i=Math.max(10,n+r);i!==n&&(o._preventPropertyChangedHandler=!0,o.labelSize=i,t._tabToResize.style[a.dimension]=parseInt(i,10)+"px"),t.$resizeToken.addClass("smart-hidden"),t._applyTabOverflow(),t._resizing=!1,t.removeAttribute("resizing")}}},{key:"_ripple",value:function(e,t){if(-1!==this.className.indexOf("material")){var a=document.createElement("div");return a.className="ripple-agent",t.firstElementChild.appendChild(a),setTimeout(function(){t.firstElementChild.removeChild(a)},1e3),Smart.Utilities.Animation.Ripple.animate(a,e.pageX,e.pageY),!0}}},{key:"_scrollButtonFarClickHandler",value:function(){var e=this,t=e.$.tabStrip;e.$.scrollButtonFar.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft=t.scrollLeft+10:t.scrollTop=t.scrollTop+10,e._updateScrollButtonVisibility())}},{key:"_scrollButtonNearClickHandler",value:function(){var e=this,t=e.$.tabStrip;e.$.scrollButtonNear.disabled||("top"===e.tabPosition||"bottom"===e.tabPosition?t.scrollLeft=t.scrollLeft-10:t.scrollTop=t.scrollTop-10,e._updateScrollButtonVisibility())}},{key:"_select",value:function(e,t,a){var r=this,o=r.$.hasClass("animation");if(void 0===a&&(a=r.selectedIndex),e!==a){var n=r._tabs[e];if(null!==a){var i=r._tabs[a];o?r._animateSelection(n,i,e>a):i.$.addClass("smart-visibility-hidden"),i.selected=!1,r._tabLabelContainers[a].$.removeClass("smart-tab-selected"),r.closeButtons&&"selected"===r.closeButtonMode&&r._disableCloseButton(a)}n.selected=!0,null!==a&&o||n.$.removeClass("smart-visibility-hidden"),r.selectedIndex!==e&&(r.selectedIndex=e),r._tabLabelContainers[e].$.removeClass("smart-tab-hovered"),r._tabLabelContainers[e].$.addClass("smart-tab-selected"),r.closeButtons&&"selected"===r.closeButtonMode&&r._enableCloseButton(e),t&&(r.$.hiddenInput.value=e,r.$.fireEvent("change",{index:e,oldIndex:a})),r._closeGroupDropDown(),null!==n.group?r._selectedGroup&&r._selectedGroup.group===n.group||(r._selectedGroup&&r._selectedGroup.$.removeClass("smart-tab-group-selected"),r._selectedGroup=r._groupLabels[r._groups.indexOf(n.group)],r._selectedGroup.$.addClass("smart-tab-group-selected")):r._selectedGroup&&(r._selectedGroup.$.removeClass("smart-tab-group-selected"),delete r._selectedGroup)}}},{key:"_selectStartHandler",value:function(e){var t=this;(t._reordering||t._resizing)&&e.preventDefault()}},{key:"_setLabel",value:function(e,t,a){var r=document.getElementById(e);if(null!==r&&"template"===r.tagName.toLowerCase()){var o=document.importNode(r.content,!0);if(t.appendChild(o),a){var n=document.importNode(r.content,!0);a.appendChild(n)}}else""===e&&(e="&nbsp;"),t.innerHTML=e,a&&(a.innerHTML=e)}},{key:"_showCloseButton",value:function(e){e.closeButtonEnabled&&(e.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.removeClass("smart-hidden"))}},{key:"_tabContentSectionTransitionendHandler",value:function(e){var t=this,a=e.target;a===t._animatedOldTab?(a.$.addClass("smart-hidden"),a.$.removeClass("animate"),a.$.removeClass(t._animatedOldTab.classToRemove),a.$.removeClass("smart-hidden"),delete t._animatedOldTab):a===t._animatedTab&&(a.$.removeClass("animate"),delete t._animatedTab)}},{key:"_tabsHeaderItemsWheelHandler",value:function(e){var t=this,a=t._orientationSettings;if(t.enableMouseWheelAction&&!t._wheelInProgress&&!t.disabled&&t.$.tabStrip[a.size]!==t.$.tabStrip[a.scrollSize]){e.preventDefault(),t._dragStartDetails={startX:e.pageX,startY:e.pageY,pageX:e.pageX,pageY:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;var r={};r[a.coordinate]=e[a.coordinate]+(e.deltaY>0?-1:1)*a.wheelOffset,t._endSwiping(r,t._dragStartDetails.startTime+100)}}},{key:"_tabStripHandler",value:function(e,t){var a=this,r=t.type;if("down"===r&&void 0!==a._tabToResize)return a._resizing=!0,void(a._tabsHeaderSectionCoordinate=a.$.tabsHeaderSection.getBoundingClientRect()[a._orientationSettings.edge]);"down"===r&&Smart.Utilities.Core.isMobile&&(a._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),originalTime:Date.now(),target:t.originalEvent.target});var o=e.closest("smart-repeat-button");if("up"===r&&o)return a.focus(),void(a.resize&&a._getTabCoordinates());if(e.classList.contains("smart-tab-close-button"))if("up"===r){if(e===a._downTarget){var n=e.parentElement.parentElement.tab.index,i=a.$.fireEvent("closing",{index:n});return void(i.defaultPrevented||(a.remove(n),a.$.fireEvent("close",{index:n})))}}else{if("down"===r)return void(a._downTarget=e);a._reordering||a._swiping||("mouseover"===r?e.$.addClass("smart-tab-close-button-hovered"):"mouseout"===r&&e.$.removeClass("smart-tab-close-button-hovered"))}var l=e.closest(".smart-tab-label-container");if(null!==l)return void a._labelContainerHandler(l,t,r);var s=e.closest(".smart-tab-group-container");null!==s&&a._groupContainerHandler(s,r),null!==o&&"down"===r&&a._ripple(t,o)}},{key:"_tabStripMouseleaveHandler",value:function(){var e=this;e.resize&&!e._resizing&&e.hasAttribute("resizing")&&e.removeAttribute("resizing")}},{key:"_tabStripMoveHandler",value:function(e){var t=this;if(!t._dragStartDetails||t._dragStartDetails.checked||t._dragStartDetails.pageX===e.pageX&&t._dragStartDetails.pageY===e.pageY||(Date.now()-t._dragStartDetails.originalTime<500?(t._endReordering(void 0,void 0),t._dragStartDetails.checked=!0):delete t._dragStartDetails),t._dragStartDetails){var a=t._orientationSettings,r=t._dragStartDetails[a.coordinate]-e[a.coordinate],o=t.$.tabStrip[a.scrollDirection];return t.$.tabStrip[a.scrollDirection]+=r,o!==t.$.tabStrip[a.scrollDirection]&&t._updateScrollButtonVisibility(),t._dragStartDetails={startX:t._dragStartDetails.startX,startY:t._dragStartDetails.startY,pageX:e.pageX,pageY:e.pageY,startTime:t._dragStartDetails.startTime,originalTime:t._dragStartDetails.originalTime,target:e.originalEvent.target,checked:t._dragStartDetails.checked},void(t._swiping=!0)}if(t.resize&&!t._resizing&&!t._reordering&&"shrink"!==t.tabLayout){for(var n=t._orientationSettings,i=e[n.coordinate],l=t._tabCoordinates,s=void 0,d=0;d<l.length;d++){var c=l[d][n.to];if(i>=c-4&&i<=c+4){s=t._reorderItems[d],t._resizeFrom=i;break}}void 0!==s?(t._tabToResize=s,t.setAttribute("resizing","")):(t._tabToResize=void 0,t.removeAttribute("resizing"))}}},{key:"_toggleCollapsedState",value:function(){var e=this;e.collapsible&&(e.collapsed?e.expand():e.collapse())}},{key:"_updateIndexes",value:function(e){var t=this;null!==t.selectedIndex&&e<=t.selectedIndex&&t.selectedIndex++,t._updateTabIndexes()}},{key:"_updateScrollButtonVisibility",value:function(){var e=this;if("scroll"===e.tabLayout&&"hidden"!==e.overflow){var t=e.$tabsHeaderSection,a=e.$.tabStrip,r=e._orientationSettings,o=!0,n=!0;if(0===Math.round(a[r.scrollDirection])&&(o=!1),Math.round(a[r.size]+a[r.scrollDirection])>=Math.round(a[r.scrollSize])&&(n=!1),"auto"===e.overflow){if(o&&n)return e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),void t.removeClass("one-button-shown");o?e.$scrollButtonNear.removeClass("smart-hidden"):e.$scrollButtonNear.addClass("smart-hidden"),n?e.$scrollButtonFar.removeClass("smart-hidden"):e.$scrollButtonFar.addClass("smart-hidden"),t.addClass("one-button-shown"),e._getTabCoordinates()}else"scroll"!==e.overflow||e.disabled||(e.$.scrollButtonNear.disabled=!o,e.$.scrollButtonFar.disabled=!n)}}},{key:"_updateTabIndexes",value:function(){var e=this;if(e._tabs.length>0)for(var t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t);else e.selectedIndex=null}},{key:"_validateIndex",value:function(e,t){if(isNaN(parseInt(e,10))||"object"===(void 0===e?"undefined":babelHelpers.typeof(e))){var a=this;a.error(a.localize("invalidIndex",{method:t}))}}},{key:"_validateInitialSelection",value:function(){for(var e=this,t=e.selectedIndex,a=0;a<e._tabs.length;a++){var r=e._tabs[a];t===a?r.selected=!0:r.selected?null===t?t=a:(r.selected=!1,r.$.addClass("smart-visibility-hidden")):r.$.addClass("smart-visibility-hidden")}e._tabs.length>0&&null===t&&(t=0,e._tabs[0].selected=!0,e._tabs[0].$.removeClass("smart-visibility-hidden")),e.selectedIndex=t}}],[{key:"properties",get:function(){return{addNewTab:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:'smart-tabs: The method "insert" requires a details Object to be passed as a second argument.',invalidIndex:'smart-tabs: "{{method}}" method accepts an index of type number.',referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:'smart-tabs: The method "{{method}}" requires a "smart-tab-item" element to be passed as an argument.'}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}},{key:"listeners",get:function(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonFarClickHandler","scrollButtonNear.click":"_scrollButtonNearClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}}]),t}(Smart.BaseElement));
//# sourceMappingURL=smart.tabs.js.map
