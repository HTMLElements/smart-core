
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart("smart-drop-down-list",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <span class="smart-label" id="label">[[label]]</span>\n                    <div id="content" class="smart-content">\n                        <span id="actionButton" class="smart-action-button"></span>\n                        <span id="dropDownButton" class="smart-drop-down-button">\n                            <span id="arrow">&#xe804</span>\n                        </span>\n                        <div id="dropDownContainer" class="smart-drop-down smart-visibility-hidden">\n                            <smart-list-box id="listBox"\n                                    unfocusable="true"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    name="[[name]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    readonly="[[readonly]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    value-member="[[valueMember]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </smart-list-box>\n                            <div id="resizeBar" class="smart-drop-down-resize-bar">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="smart-hint" id="hint">[[hint]]</span>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,o,n){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,o,n);var i=this;switch(e){case"disabled":i._setFocusable(),i.close();break;case"dataSource":case"displayMember":i.$.actionButton&&(i.$.actionButton.innerHTML=i.placeholder),i._setDropDownSize(),i._checkBrowserBounds("vertically"),i.dropDownAppendTo&&i.dropDownAppendTo.length>0&&i._rePositionListBox(),i._checkBrowserBounds("horizontally");break;case"dropDownAppendTo":i._setElementParent(n);break;case"dropDownOpenMode":i._setFocusable(),i.$dropDownContainer.addClass("smart-visibility-hidden"),i.$.dropDownButton.removeAttribute("selected");break;case"dropDownPosition":i.$.dropDownContainer.removeAttribute(i._dropDownListPosition),i._setDropDownPosition(n),i._rePositionListBox();break;case"dropDownWidth":case"dropDownHeight":i._setDropDownSize();break;case"opened":if(i.disabled||i.readonly)return;n?i.open():i.close();break;case"placeholder":0===i.selectedIndexes.length&&i._applySelection();break;case"readonly":i.close();break;case"resizeIndicator":n?i.$.dropDownContainer.setAttribute("resize-indicator",""):i.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":i.$.dropDownContainer.setAttribute("resize-mode",i.resizeMode);break;case"selectedValues":case"selectedIndexes":0===n.length&&(i.$.actionButton.innerHTML=i.placeholder);break;case"selectionDisplayMode":i._applySelection();break;case"unfocusable":i._setFocusable()}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}));t.$.listBox.appendChild(e)}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),e.$.listBox&&(e.dropDownAppendTo&&e.dropDownAppendTo.length>0&&e._setElementParent(e.dropDownAppendTo),"auto"===e.dropDownPosition&&e._checkBrowserBounds())}},{key:"detached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),e.$.dropDownContainer&&e.dropDownAppendTo&&e.dropDownAppendTo.length>0&&e.$.dropDownContainer.parentElement&&e.$.dropDownContainer.parentElement.removeChild(e.$.dropDownContainer)}},{key:"clearItems",value:function(){var e=this;e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder}},{key:"clearSelection",value:function(){var e=this;e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder}},{key:"close",value:function(){var e=this;if(!e.$dropDownContainer.hasClass("smart-visibility-hidden")){e.$.fireEvent("closing").defaultPrevented||(e.$dropDownContainer.addClass("smart-visibility-hidden"),e.$.fireEvent("close"),e.$.dropDownButton&&e.$.dropDownButton.removeAttribute("selected"),e.opened=!1,e._preventDropDownClose=!1)}}},{key:"cloneNode",value:function(){var e=this,t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}},{key:"ensureVisible",value:function(e){this.$.listBox.ensureVisible(e)}},{key:"getItem",value:function(e){return this.$.listBox.getItem(e)}},{key:"insert",value:function(e,t){var o=this;o.$.listBox.insert(e,t),o._applySelection()}},{key:"insertBefore",value:function(e,t){var o=this;if(!o.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,n.concat(Array.prototype.slice.call(arguments)))}if(!e||!t)return void o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));o.$.listBox.insertBefore(e,t)}},{key:"open",value:function(){var e=this,t=function(){for(var t=0;t<e.items.length;t++)if(!e.items[t].disabled)return e.items[t]};if(!e.disabled&&e.$dropDownContainer.hasClass("smart-visibility-hidden")){if(e.dropDownAppendTo&&e.dropDownAppendTo.length>0){var o=e.getBoundingClientRect();if(e.$.container.contains(e.$.dropDownContainer)){var n=0,i=setInterval(function(){var t=e.getBoundingClientRect();n++,t.top===e._positionTop&&n<10||(e.open(),clearInterval(i),e._positionTop=t.top)},100);return}o.top!==e._positionTop&&(e._positionTop=o.top)}e.$.fireEvent("opening").defaultPrevented||(e._checkBrowserBounds("vertically"),e.dropDownAppendTo&&e.dropDownAppendTo.length>0&&e._rePositionListBox(),e._checkBrowserBounds("horizontally"),e.$dropDownContainer.removeClass("smart-visibility-hidden"),e.$.fireEvent("open"),e.$.dropDownButton&&("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("selected",""):e.$.dropDownButton.removeAttribute("selected")),(!e.$.listBox._focusedItem||e.$.listBox._focusedItem&&!e.$.listBox._focusedItem.focused)&&(e.selectedIndexes.length>0?e._focus(e.items[e.selectedIndexes[0]]):e._focus(t)),e.$.input&&e.$.input.focus(),e.opened=!0)}}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e.$.dropDownContainer&&(e._setDropDownPosition(e.dropDownPosition),e._calculateDropDownSize(),e.$.dropDownContainer.setAttribute("resize-mode",e.resizeMode),e.resizeIndicator&&e.$.dropDownContainer.setAttribute("resize-indicator","")),e.opened&&e.open(),e._positionTop=e.getBoundingClientRect().top,e._createElement()}},{key:"remove",value:function(e){var t=this;t.$.listBox.remove(e),t._applySelection()}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!(e&&e instanceof Smart.ListItem))return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}));t.$.listBox.removeChild(e)}},{key:"select",value:function(e){this.$.listBox.select(e)}},{key:"_setFocusable",value:function(){var e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.actionButton.removeAttribute("tabindex"),void e.$.dropDownButton.removeAttribute("tabindex");var t=e.tabIndex>0?e.tabIndex:0;"dropDownButton"===e.dropDownOpenMode?(e.removeAttribute("tabindex"),e.$.actionButton.setAttribute("tabindex",t),e.$.dropDownButton.setAttribute("tabindex",t)):(e.$.actionButton.removeAttribute("tabindex"),e.$.dropDownButton.removeAttribute("tabindex"),e.tabIndex=t)}},{key:"unselect",value:function(e){this.$.listBox.unselect(e)}},{key:"update",value:function(e,t){var o=this;o.$.listBox.update(e,t),o._applySelection()}},{key:"_applySelection",value:function(){var e=this;if("placeholder"===e.selectionDisplayMode||0===e.selectedIndexes.length)return void(e.$.actionButton.innerHTML=e.placeholder);if(e.$.listBox._items&&0!==e.$.listBox._items.length){if("plain"===e.selectionDisplayMode&&("one"===e.selectionMode||"zeroOrOne"===e.selectionMode||"radioButton"===e.selectionMode))return void(e.$.actionButton.innerHTML=e.selectedIndexes.map(function(t){return e.$.listBox._items[t].label}).toString());var t=document,o=t.createDocumentFragment(),n=void 0,i=void 0;i="tokens"===e.selectionDisplayMode?1===e.selectedIndexes.length&&["oneOrManyExtended","oneOrMany","one","radioButton"].indexOf(e.selectionMode)>-1?"":"&#10006":",",e.selectedIndexes.map(function(r){n=t.createElement("span"),n.innerHTML="<span class='smart-drop-down-list-selection-label'>"+e.$.listBox._items[r].label+"</span><span class='smart-drop-down-list-unselect-button'>"+i+"</span>",o.appendChild(n)}),e.$.actionButton.innerHTML="",e.$.actionButton.appendChild(o)}}},{key:"_bindingCompleteHandler",value:function(){var e=this;e.$.listBox&&e._setDropDownSize()}},{key:"_buttonsDownHandler",value:function(e){var t=this;t.disabled||(t.className.indexOf("material")>-1&&Smart.Utilities.Animation.Ripple.animate(e.target,e.pageX,e.pageY),t._preventsSelectStart=!0,"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$actionButton.addClass("active"),t.opened&&(t._preventDropDownClose=!0))}},{key:"_buttonsMouseEventsHandler",value:function(e){this.disabled||("mouseenter"===e.type?e.target.$.addClass("hovered"):e.target.$.removeClass("hovered"))}},{key:"_calculateDropDownSize",value:function(){var e=this;e._dropDownSize={};var t=window.getComputedStyle(e.$.dropDownContainer),o=parseFloat(t.getPropertyValue("border-top-width").trim()),n=parseFloat(t.getPropertyValue("border-bottom-width").trim()),i=parseFloat(t.getPropertyValue("padding-top").trim()),r=parseFloat(t.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()?(e._dropDownSize.width=t.getPropertyValue("--smart-drop-down-element-width").trim(),e._dropDownSize.height=t.getPropertyValue("--smart-drop-down-element-height").trim()):(e._dropDownSize.width="auto"===e.dropDownWidth?"auto":e.offsetWidth+"px",e._dropDownSize.height="auto"),e._dropDownSize.minHeight=parseFloat(t.getPropertyValue("min-height").trim()),e._dropDownSize.maxHeight=parseFloat(t.getPropertyValue("max-height").trim()),e._dropDownSize.borderWidth=(isNaN(o)?0:o)+(isNaN(n)?0:n),e._dropDownSize.paddingWidth=(isNaN(i)?0:i)+(isNaN(r)?0:r)}},{key:"_checkBrowserBoundsVertically",value:function(e){var t=this;e||(e=t.getBoundingClientRect()),t._dropDownListPosition&&(t.$.dropDownContainer.removeAttribute(t._dropDownListPosition),t.$.dropDownButton.removeAttribute(t._dropDownListPosition)),document.documentElement.clientHeight-Math.abs(e.top+e.height+t.$.dropDownContainer.offsetHeight)>=0?t._dropDownListPosition="bottom":e.top-t.$.dropDownContainer.offsetHeight>=0?t._dropDownListPosition="top":t._dropDownListPosition="overlay-bottom",t.$.dropDownButton.setAttribute(t._dropDownListPosition,""),t.$.dropDownContainer.setAttribute(t._dropDownListPosition,"")}},{key:"_checkBrowserBoundsHorizontally",value:function(){var e=this,t=void 0,o=0;e.dropDownAppendTo&&e.dropDownAppendTo.length>0?(t=!0,window.innerWidth!==document.documentElement.clientWidth&&(o=window.innerWidth-document.documentElement.clientWidth)):e.$.dropDownContainer.style.left="";var n=e.getBoundingClientRect().left;if(n<0&&(e.$.dropDownContainer.style.left=(t?0:Math.abs(n))+"px",n=parseFloat(e.$.dropDownContainer.style.left)),n+e.$.dropDownContainer.offsetWidth>document.documentElement.clientWidth){var i=n-Math.abs(document.documentElement.clientWidth-n-e.$.dropDownContainer.offsetWidth);e.$.dropDownContainer.style.left=(t?i:i-n)+"px",window.innerWidth===document.documentElement.clientWidth&&(e.$.dropDownContainer.style.left=parseFloat(e.$.dropDownContainer.style.left)+o+"px"),t&&window.innerHeight===document.documentElement.clientHeight&&e._rePositionListBox(!0)}}},{key:"_checkBrowserBounds",value:function(e){var t=this;if(!t.disabled&&"auto"===t.dropDownPosition)switch(e){case"vertically":t._checkBrowserBoundsVertically();break;case"horizontally":t._checkBrowserBoundsHorizontally();break;default:t._checkBrowserBoundsVertically(),t._checkBrowserBoundsHorizontally()}}},{key:"_createElement",value:function(){var e=this;e._applySelection(),e._setDropDownSize(),e._setFocusable(),e.$.arrow.noRipple=!0,e.disabled||"auto"!==e.dropDownPosition||PositionDetection.handleAutoPositioning.call(this,e._scrollHandler,200,function(){return"auto"!==e.dropDownPosition})}},{key:"_scrollHandler",value:function(){var e=this,t=e.getBoundingClientRect();t.top!==e._positionTop&&(e._checkBrowserBoundsVertically(t),e.opened&&e.dropDownAppendTo&&e.dropDownAppendTo.length>0&&e._rePositionListBox(),e._positionTop=t.top)}},{key:"_documentDownHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly){var o=e.originalEvent.target.closest("smart-list-item");if(t.className.indexOf("material")>-1&&o&&Smart.Utilities.Animation.Ripple.animate(o,e.pageX,e.pageY),t._isListBoxThumbDragged=e.target!==document&&e.target.classList.contains("smart-thumb")&&e.target.ownerElement.ownerElement===t.$.listBox,(o||e.originalEvent.target===t.$.listBox.$.filterInput)&&(t._preventDropDownClose=!0),e.originalEvent.target===t.$.resizeBar&&"none"!==t.resizeMode){t._resizeDetails||(t._resizeDetails={});var n=t.$.dropDownContainer.getBoundingClientRect();t._resizeDetails.started=!0,t._resizeDetails.x=e.pageX,t._resizeDetails.y=e.pageY,t._resizeDetails.width=t.$.dropDownContainer.offsetWidth,t._resizeDetails.height=t.$.dropDownContainer.offsetHeight,t._resizeDetails.offsetXL=e.clientX-n.left,t._resizeDetails.offsetXR=n.left+t.$.dropDownContainer.offsetWidth-e.clientX,t._resizeDetails.offsetY=n.top+t.$.dropDownContainer.offsetHeight-e.clientY,t._resizeDetails.offsetYtop=e.clientY-n.top,t._preventDropDownClose=!0}}}},{key:"_documentMoveHandler",value:function(e){function t(){if(l=e.pageY-n._resizeDetails.y,"bottom"===s)n._resizeDetails.height=Math.min(i.clientHeight-r.top-6,Math.max(0,n._resizeDetails.height+l)),n._resizeDetails.y=Math.max(r.top+i.scrollTop-n._resizeDetails.offsetY,Math.min(i.clientHeight+i.scrollTop-1.5*n._resizeDetails.offsetY,e.pageY));else{n._resizeDetails.height=Math.min(n._dropDownSize.maxHeight,Math.max(0,Math.min(n.offsetTop,n._resizeDetails.height-l))),l=Math.max(0,n.$.dropDownContainer.offsetTop+(r.height-Math.max(n._dropDownSize.minHeight,n._resizeDetails.height))),n.$.dropDownContainer.style.top=n.dropDownAppendTo&&n.dropDownAppendTo.length>0?l+"px":"";var t=a.top+i.scrollTop+n._resizeDetails.offsetYtop;n._resizeDetails.y=Math.max(n._resizeDetails.offsetYtop,Math.min(t,Math.max(t-n._dropDownSize.maxHeight,e.pageY)))}n.$.dropDownContainer.style.height=n._resizeDetails.height+"px"}function o(){l=e.pageX-n._resizeDetails.x,n._resizeDetails.width=Math.min(i.clientWidth-r.left-6,Math.max(0,n._resizeDetails.width+l)),n.$.dropDownContainer.style.width=n._resizeDetails.width+"px",n._resizeDetails.x=Math.max(r.left+i.scrollLeft-n._resizeDetails.offsetXR,Math.min(i.clientWidth+i.scrollLeft-1.5*n._resizeDetails.offsetXR,e.pageX))}var n=this;if(n._resizeDetails&&(!n._resizeDetails||n._resizeDetails.started)){n.setAttribute("resizing",""),n._resizeDetails.resizeEventFired||(n.$.fireEvent("resizeStart",{position:{left:e.pageX,top:e.pageY}}),n._resizeDetails.resizeEventFired=!0);var i=document.documentElement,r=n.$.dropDownContainer.getBoundingClientRect(),a=n.getBoundingClientRect(),s=n.$.dropDownContainer.hasAttribute("top")?"top":"bottom",l=void 0;switch(n.resizeMode){case"vertical":t();break;case"horizontal":o();break;case"both":o(),t()}}}},{key:"_documentUpHandler",value:function(e){var t=this;if(t.$actionButton.removeClass("active"),t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._preventDropDownClose=!1,t.focus(),void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(!(t.disabled||t._isListBoxThumbDragged||t.readonly)){var o=e.originalEvent.target;if(t._preventsSelectStart=!1,void 0!==o&&o!==t.$.resizeBar){if(o===t.$.actionButton||o===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&o===t.$.actionButton?void t.close():void(t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode?t.open():t.close());if(o.classList.contains("smart-drop-down-list-selection-label")&&o.closest("smart-drop-down-list")===t){"none"!==t.dropDownOpenMode&&t.open();var n=t.$.listBox._items.filter(function(e){return e.label.toString()===o.textContent})[0];return t.$.listBox._scrollView.scrollTop=n.offsetTop,void t._focus(n)}if(o.classList.contains("smart-drop-down-list-unselect-button")&&o.closest("smart-drop-down-list")===t){if(1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0)return;return void t.unselect(t.$.listBox._items.filter(function(e){return e.label.toString()===o.previousElementSibling.textContent})[0])}for(;o;){if(o instanceof Smart.ListItem&&o.ownerListBox===t.$.listBox){o="item";break}if(o===t.$.listBox){o="listBox";break}o=o.parentElement}return"listBox"!==o&&"item"!==o||"item"===o&&"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0?void t.close():void 0}}}},{key:"_dragStartHandler",value:function(e){var t=this;t._resizeDetails&&t._resizeDetails.started&&e.preventDefault()}},{key:"_focus",value:function(e){this.$.listBox._focus(e)}},{key:"_focusEventHandler",value:function(){var e=this;e.nodeName&&"Smart-DROP-DOWN-LIST"===e.nodeName&&!e._preventDropDownClose&&e.close()}},{key:"_keyDownHandler",value:function(e){var t=this;if(e.target!==t.$.listBox.$.filterInput)switch(e.key){case"Enter":case" ":e.target.$.addClass("active"),e.preventDefault(),e.target!==t.$.actionButton&&(t._keyPressed=!0,t.opened?(t.$.listBox._focusedItem&&t.select(t.$.listBox._focusedItem),"Enter"===e.key&&["one","none"].indexOf(t.selectionMode)<0&&t.close()):t.opened||t.readonly||"none"===t.dropDownOpenMode||t.open());break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$dropDownContainer.hasClass("smart-visibility-hidden")?t.open():t.close());e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":t.close();break;default:if(t.readonly)return;"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),t.$.listBox._applyIncrementalSearch(e.key)}}},{key:"_keyUpHandler",value:function(e){var t=this;e.target!==t.$.listBox.$.filterInput&&("Enter"!==e.key&&" "!==e.key||(e.target.$.removeClass("active"),t.$dropDownContainer.hasClass("smart-visibility-hidden")||(t._keyPressed=!1)),"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1))}},{key:"_listBoxChangeHandler",value:function(e){var t=this;t.dropDownAppendTo&&t.dropDownAppendTo.length>0&&t.$.fireEvent("change",e.detail),t._applySelection(t.selectionMode,e.detail)}},{key:"_listBoxKeyDownHandler",value:function(e){var t=this;if("Enter"===e.key&&(t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus(),e.stopPropagation()),"Escape"===e.key)return void t.close()}},{key:"_mouseEnterHandler",value:function(){var e=this;e.$.addClass("hovered"),"Smart-DROP-DOWN-LIST"!==e.tagName||"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e.open()}},{key:"_mouseLeaveHandler",value:function(){var e=this;e.$.removeClass("hovered"),"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e.close()}},{key:"_rePositionListBox",value:function(e){var t=this;if(!t.dropDownAppendTo||0===t.dropDownAppendTo.length)return t.$.dropDownContainer.style.left="",t.$.dropDownContainer.style.top="",void t.$dropDownContainer.removeClass("smart-drop-down-repositioned");t.$dropDownContainer.addClass("smart-drop-down-repositioned");var o=t.getBoundingClientRect(),n=o.top,i=0;switch(t.$.dropDownContainer.removeAttribute(t._dropDownListPosition),t._dropDownListPosition){case"bottom":n+=t.$.container.offsetHeight-1,t._dropDownListPosition="bottom";break;case"center-bottom":n+=t.$.container.offsetHeight-1,i+=t.offsetWidth-t.$.dropDownContainer.offsetWidth/2,t._dropDownListPosition="center-bottom";break;case"center-top":n-=t.$.dropDownContainer.offsetHeight-1,i+=t.offsetWidth-t.$.dropDownContainer.offsetWidth/2,t._dropDownListPosition="center-top";break;case"top":n-=t.$.dropDownContainer.offsetHeight-1,t._dropDownListPosition="top";break;case"overlay-bottom":t._dropDownListPosition="overlay-bottom";break;case"overlay-center":n-=t.$.dropDownContainer.offsetHeight/2-t.offsetHeight/2,t._dropDownListPosition="overlay-center";break;case"overlay-top":n-=t.$.dropDownContainer.offsetHeight-t.offsetHeight,t._dropDownListPosition="overlay-top"}t.$.dropDownContainer.style.top=n+window.pageYOffset+"px",t.$.dropDownContainer.setAttribute(t._dropDownListPosition,""),e||(t.$.dropDownContainer.style.left=i+o.left+window.pageXOffset+"px")}},{key:"_resizeHandler",value:function(){"none"===this.resizeMode&&this._setDropDownSize()}},{key:"_selectStartHandler",value:function(e){this._preventsSelectStart&&e.preventDefault()}},{key:"_setDropDownPosition",value:function(e){var t=this;t._dropDownListPosition&&t.$.dropDownButton.removeAttribute(t._dropDownListPosition),"auto"===e?t._checkBrowserBounds():t._dropDownListPosition=e,t.$.arrow.innerHTML=e.indexOf("overlay")>-1?"&#xe806":"&#xe804",t.$.dropDownButton.setAttribute(t._dropDownListPosition,""),t.$.dropDownContainer.setAttribute(t._dropDownListPosition,"")}},{key:"_setDropDownSize",value:function(){var e=this;if(e._dropDownSize||e._calculateDropDownSize(),e.dropDownWidth&&"auto"!==e.dropDownWidth?e.$.dropDownContainer.style.width=parseFloat(e.dropDownWidth)+"px":e.$.dropDownContainer.style.width="auto"===e._dropDownSize.width?e.offsetWidth+"px":e._dropDownSize.width,e.dropDownHeight&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=parseFloat(e.dropDownHeight)+"px";else if("auto"===e._dropDownSize.height){e.$.dropDownContainer.style.height="";var t=2;e.$.listBox.items.length>0&&e.$.listBox.items.map(function(e){return t+=e.offsetHeight}),t=t+e._dropDownSize.paddingWidth+e._dropDownSize.borderWidth,e.$.dropDownContainer.style.height=t+"px"}else e.$.dropDownContainer.style.height=e._dropDownSize.height}},{key:"_setElementParent",value:function(e){var t=this;t.$.hasClass("animation")?t.$dropDownContainer.addClass("animation"):t.$dropDownContainer.removeClass("animation");for(var o=0;o<t.classList.length;o++)t.classList[o].indexOf("material")>-1&&t.$dropDownContainer.addClass(t.classList[o]);if(e&&0!==e.length)if("body"===e)document.body.appendChild(t.$.dropDownContainer),-1===t.detachedChildren.indexOf(t.$.dropDownContainer)&&t.detachedChildren.push(t.$.dropDownContainer);else{var n=void 0;if(e instanceof HTMLElement?n=e:"string"==typeof e&&(n=document.getElementById(e)),!n)return;n.appendChild(t.$.dropDownContainer)}else t.$.container.appendChild(t.$.dropDownContainer);t._rePositionListBox()}},{key:"items",get:function(){if(this.$)return this.$.listBox.items}}],[{key:"properties",get:function(){return{dataSource:{value:null,type:"any?",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownAppendTo:{value:null,type:"any?"},dropDownButtonPosition:{allowedValues:["left","right","top","bottom"],value:"right",type:"string"},dropDownHeight:{value:null,type:"string?"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownWidth:{value:null,type:"string?"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemTemplate:{value:null,type:"string?"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string?"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",blur:"_focusEventHandler","dropDownButton.blur":"_focusEventHandler","listBox.change":"_listBoxChangeHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler"}}},{key:"requires",get:function(){return{"Smart.ListBox":"smart.listbox.js"}}}]),t}(Smart.ContentElement));var PositionDetection=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"handleAutoPositioning",value:function(e,t,o){function n(){s=r(n),o()&&cancelAnimationFrame(s),Date.now()-a>=t&&(e.call(i),a=Date.now())}var i=this,r=function(){return window.requestAnimationFrame}(),a=Date.now(),s=void 0;return s=r(n)}}]),e}();
//# sourceMappingURL=smart.dropdownlist.js.map
