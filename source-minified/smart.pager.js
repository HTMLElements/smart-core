
/* Smart HTML Elements v1.0.0 (2018-April) 
Copyright (c) 2011-2018 jQWidgets. 
License: http://htmlelements.com/pricing/ */

 "use strict";Smart("smart-pager",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <smart-button id="firstButton" class ="smart-first-button"></smart-button>\n                    <smart-repeat-button id="previousPageButton" class ="smart-previous-page-button"></smart-repeat-button>\n                    <smart-repeat-button id="previousButton" class ="smart-previous-button"></smart-repeat-button>\n                    <smart-button id="previousEllipsisButton" class ="smart-previous-ellipsis-button"></smart-button>\n                    <div id="itemsContainer" tabindex="0" class ="smart-items-container"></div>\n                    <smart-button id="nextEllipsisButton" class ="smart-next-ellipsis-button"></smart-button>\n                    <smart-repeat-button id="nextButton" class ="smart-next-button"></smart-repeat-button>\n                    <smart-repeat-button id="nextPageButton" class ="smart-next-page-button"></smart-repeat-button>\n                    <smart-button id="lastButton" class="smart-last-button"></smart-button>\n                    <div id="goToBlock" class ="smart-go-to-block">\n                        <input type="text" id="goToInput" class ="smart-go-to-input" />\n                        <smart-button id="goToButton" class ="smart-go-to-button"></smart-button>\n                    </div>\n                    <div id="itemsPerPageBlock" class ="smart-items-per-page-block">\n                        <smart-drop-down-list id="itemsPerPageDropDown" class ="smart-items-per-page-drop-down"\n                            data-source="[[rowsCountOptions]]"\n                            drop-down-height="auto"\n                            selection-mode="one"\n                            disabled="[[disabled]]">\n                        </smart-drop-down-list>\n                    </div>\n                    <span id="range" class ="smart-range"></span>\n                </div>'}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e.navigationButtons=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton"],e.customButtons=["previousEllipsisButton","nextEllipsisButton","goToButton","goToInput"],e._handleLocalization(),e._createPageItems(),e._selectItem(e.currentItem),e._calculatePagesCount(),e._updateButtonsNames(),e._handleEllipsis(),e._updateRange(),e._handleMaterialDropDown(),e.disabled&&(e._enableDisableElements(e.navigationButtons,!0),e._enableDisableElements(e.customButtons,!0))}},{key:"propertyChangedHandler",value:function(e,a,n){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,a,n);var s=this;switch(e){case"disabled":n?s._enableDisableElements(s.navigationButtons,!0):s._handleButtons(),s._enableDisableElements(s.customButtons,n);break;case"currentItem":n>s.items-1?(n=s.items-1,s.currentItem=n):n<0&&(n=0,s.currentItem=n),s.currentPage=Math.floor(n/s.itemsPerPage),s._refreshPageItems(),s._updateRange(),s._handleButtonsEllipsis();break;case"currentPage":n>s.pagesCount-1?s.currentPage=n=s.pagesCount-1:n<0&&(s.currentPage=n=0),s._changePage(n),s._isItemInPage(s.currentItem,n,s.itemsPerPage)||(s.currentItem=n*s.itemsPerPage,s._refreshPageItems()),s._updateRange(),s._handleButtonsEllipsis();break;case"items":case"itemsPerPage":s._calculatePagesCount(),"itemsPerPage"!==e||s._isItemInPage(s.currentItem,s.currentPage,n)?"items"===e&&s.currentItem>=n&&(s.currentItem=n-1,s.currentPage=s._currentItemsPage()):s.currentPage=s._currentItemsPage(),s._updateRange(),s._refreshPageItems(),s._handleButtonsEllipsis();break;case"pagesCount":s.pagesCount=a;break;case"showRowsCount":n&&s.$.fireEvent("rowsCountChanged",{rows:s.$.itemsPerPageDropDown.value});break;case"showRange":n&&s._updateRange();break;case"rowsCountOptions":s.$.itemsPerPageDropDown.dataSource=n;break;case"localization":s._handleLocalization(),s._updateButtonsNames(),s._updateRange();break;case"disabledItems":s._calculatePagesCount(),s._updateRange(),s._refreshPageItems();break;case"ellipsis":s._handleEllipsis();break;case"labelMap":case"itemTemplate":s._createPageItems(s.currentPage*s.itemsPerPage,(s.currentPage+1)*s.itemsPerPage)}}},{key:"nextItem",value:function(){var e=this;e.currentItem>=e.items-1||e.disabled||e._navigateItems("next")}},{key:"nextPage",value:function(){var e=this;e.currentPage*e.itemsPerPage>=e.items||e.disabled||e._changePage(e.currentPage+1)}},{key:"prevItem",value:function(){var e=this;e.currentItem<=0||e.disabled||e._navigateItems("prev")}},{key:"prevPage",value:function(){var e=this;e.currentPage<=0||e.disabled||e._changePage(e.currentPage-1)}},{key:"_applyTemplate",value:function(e,t){var a=this;if(null!==a.itemTemplate&&a._bindingDetails&&0!==a._bindingDetails.length){for(var n=a._bindingDetails.length,s=document.importNode(a._template.content,!0),r=void 0,i=void 0,o=0;o<n;o++){r=s.childNodes[a._bindingDetails[o].childNodeIndex],i=a._bindingDetails[o].bindingString.length;for(var l=0;l<i;l++)r.innerHTML=r.innerHTML.replace(a._bindingDetails[o].bindingString[l],t)}e.innerHTML="";for(var u=0;u<s.childNodes.length;u++)s.childNodes[u].outerHTML&&(e.innerHTML+=s.childNodes[u].outerHTML)}}},{key:"_calculatePagesCount",value:function(){var e=this;e.pagesCount=e.items%e.itemsPerPage>0?Math.floor(e.items/e.itemsPerPage)+1:e.items/e.itemsPerPage}},{key:"_changePage",value:function(e,t){var a=this;if(isNaN(e)||e<0?e=0:e>a.pagesCount-1&&(e=a.pagesCount-1),e===a.currentPage)return void(a.$.goToInput.value="");t=t||e*a.itemsPerPage,a.currentPage=e,a._createPageItems(a.currentPage*a.itemsPerPage,(a.currentPage+1)*a.itemsPerPage),a._selectItem(t)}},{key:"_createPageItems",value:function(e,t){var a=this;a._currentHtmlItems=[],a.$.itemsContainer.innerHTML="",e=e||0,t=t||e+a.itemsPerPage,t=t<a.items?t:a.items;for(var n=e;n<t;n++){var s=document.createElement("span"),r=a.labelMap?a.labelMap[n]||n+1:n+1;a.disabledItems.indexOf(n)>-1?s.className="smart-pager-item smart-disabled":s.className="smart-pager-item",a._handleItemTemplate()?a._applyTemplate(s,r):s.innerHTML=r,a.$.itemsContainer.appendChild(s),a._currentHtmlItems.push(s)}a._updateRange(e+1,t)}},{key:"_currentItemsPage",value:function(){var e=this;return parseInt(e.currentItem/e.itemsPerPage)}},{key:"_enableDisableElements",value:function(e,t){for(var a=this,n=0;n<e.length;n++)a.$[e[n]].disabled=t}},{key:"_firstButtonClickHandler",value:function(){var e=this;e.disabled||(e._unSelectItem(e.currentItem),e._createPageItems(),e._selectItem(0),e.currentPage=0,e._handleButtonsEllipsis())}},{key:"_goToButtonClickHandler",value:function(){var e=this,t=e.$.goToInput.value;e.disabled||""===t||(e._changePage(parseInt(t)),e.$.goToInput.value="")}},{key:"_handleButtons",value:function(){var e=this;e.disabled||(e.$.previousPageButton.disabled=0===e.currentPage,e.$.nextPageButton.disabled=e.currentPage===e.pagesCount-1,0===e.currentItem?(e.$.previousButton.disabled=!0,e.$.firstButton.disabled=!0):(e.$.previousButton.disabled=!1,e.$.firstButton.disabled=!1),e.currentItem===e.items-1?(e.$.nextButton.disabled=!0,e.$.lastButton.disabled=!0):(e.$.nextButton.disabled=!1,e.$.lastButton.disabled=!1))}},{key:"_handleButtonsEllipsis",value:function(){var e=this;e._handleEllipsis(),e._handleButtons()}},{key:"_handleEllipsis",value:function(){var e=this;e.ellipsis&&(0===e.currentPage?e.$previousEllipsisButton.addClass("smart-hidden"):e.$previousEllipsisButton.hasClass("smart-hidden")&&e.$previousEllipsisButton.removeClass("smart-hidden"),e.currentPage===e.pagesCount-1?e.$nextEllipsisButton.addClass("smart-hidden"):e.$nextEllipsisButton.hasClass("smart-hidden")&&e.$nextEllipsisButton.removeClass("smart-hidden"))}},{key:"_handleLocalization",value:function(){var e=this;e.localization?e._localization={firstButton:e.localization.firstButton||"First",lastButton:e.localization.lastButton||"Last",previousButton:e.localization.previousButton||"Previous",nextButton:e.localization.nextButton||"Next",previousPageButton:e.localization.previousPageButton||"Page -",nextPageButton:e.localization.nextPageButton||"Page +",goToButton:e.localization.goToButton||"Go to",goToInputPlaceholder:e.localization.goToInputPlaceholder||"",ellipsis:e.localization.ellipsis||"...",rangeString:e.localization.rangeString||"of",rangePrefix:e.localization.rangePrefix||"of",rangeSuffix:e.localization.rangeSuffix||""}:e._localization={firstButton:"First",lastButton:"Last",previousButton:"Previous",nextButton:"Next",previousPageButton:"Page -",nextPageButton:"Page +",goToButton:"Go to",goToInputPlaceholder:"",ellipsis:"...",rangeString:"of",rangePrefix:"of",rangeSuffix:""}}},{key:"_handleItemTemplate",value:function(){var e=this,t=e.itemTemplate;if(null!==t&&t){if(!("content"in document.createElement("template")))return e.error(e.localize("htmlTemplateNotSuported",{elementType:e.nodeName.toLowerCase()})),void(e.itemTemplate=null);if(null===(t=document.getElementById(t))||!("content"in t))return e.error(e.localize("invalidTemplate",{elementType:e.nodeName.toLowerCase(),property:"itemTemplate"})),void(e.itemTemplate=null);var a=t.content,n=a.childNodes.length,s=/{{\w+}}/g,r=void 0,i=void 0;e._bindingDetails=[],e._template=t;for(var o=0;o<n;o++){for(i=[];r=s.exec(a.childNodes[o].innerHTML);)i.push(r[0]);i.length>0&&e._bindingDetails.push({childNodeIndex:o,bindingString:i})}return!0}}},{key:"_handleMaterialDropDown",value:function(){var e=this;if(-1!==e.className.indexOf("animation")&&e.$.itemsPerPageDropDown.classList.add("animation"),-1!==e.className.indexOf("material-dark"))e.$.itemsPerPageDropDown.classList.add("material-dark");else{if(-1===e.className.indexOf("material"))return;e.$.itemsPerPageDropDown.classList.add("material")}e.$.itemsPerPageDropDown.dropDownPosition="overlay-center"}},{key:"_isItemInPage",value:function(e,t,a){return e>=t*a&&e<(t+1)*a}},{key:"_itemsContainerClickHandler",value:function(e){var t=this,a=t.currentItem,n=e.target.closest(".smart-pager-item");if(n&&!n.classList.contains("smart-selected")){for(var s=0;s<t._currentHtmlItems.length;s++)t._currentHtmlItems[s]===n?t._selectItem(t.itemsPerPage*t.currentPage+s):t._unSelectItem(a);t._handleButtons()}}},{key:"_itemsPerPageDropDownChangeHandler",value:function(e){var t=this;t.showRowsCount&&!t.disabled&&t.$.fireEvent("rowsCountChanged",{value:parseInt(e.detail.value)})}},{key:"_keyDownHandler",value:function(e){var t=this;if(!t.disabled)switch(e.preventDefault(),e.key){case"End":t._lastButtonClickHandler();break;case"Home":t._firstButtonClickHandler();break;case"PageUp":t.nextPage();break;case"PageDown":t.prevPage();break;case"ArrowUp":case"ArrowRight":t.nextItem();break;case"ArrowDown":case"ArrowLeft":t.prevItem()}}},{key:"_lastButtonClickHandler",value:function(){var e=this;e.disabled||(e._unSelectItem(e.currentItem),e.currentPage=e.pagesCount-1,e._createPageItems(e.currentPage*e.itemsPerPage,(e.currentPage+1)*e.itemsPerPage),e.currentItem=e.items-1,e._selectItem(e.currentItem),e._handleEllipsis())}},{key:"_navigateItems",value:function(e){var t=this;if("prev"===e)return t.currentPage*t.itemsPerPage===t.currentItem?(t.currentPage--,t._createPageItems(t.currentPage*t.itemsPerPage,(t.currentPage+1)*t.itemsPerPage)):t._unSelectItem(t.currentItem),t.currentItem--,t._selectItem(t.currentItem),void t._handleEllipsis();(t.currentPage+1)*t.itemsPerPage-1===t.currentItem?(t.currentPage++,t._createPageItems(t.currentPage*t.itemsPerPage,(t.currentPage+1)*t.itemsPerPage)):t._unSelectItem(t.currentItem),t.currentItem++,t._selectItem(t.currentItem),t._handleEllipsis()}},{key:"_nextButtonClickHandler",value:function(){var e=this;e.currentItem>=e.items-1||e.disabled||e._navigateItems("next")}},{key:"_nextPageButtonClickHandler",value:function(){var e=this;e.nextPage(),e._handleEllipsis()}},{key:"_previousButtonClickHandler",value:function(){var e=this;e.currentItem<1||e.disabled||e._navigateItems("prev")}},{key:"_previousPageButtonClickHandler",value:function(){var e=this;e.prevPage(),e._handleEllipsis()}},{key:"_refreshPageItems",value:function(){var e=this;e._createPageItems(e.currentPage*e.itemsPerPage,(e.currentPage+1)*e.itemsPerPage),e._selectItem(e.currentItem,!0),e._handleButtons()}},{key:"_selectItem",value:function(e,t){var a=this,n=a.currentItem;if(!(a.disabled&&!t||a._currentHtmlItems.length<=0||0===a.items||a.disabledItems.indexOf(e)>-1)){var s=e%a.itemsPerPage||0,r=a._currentHtmlItems[s];r.classList.contains("smart-selected")||(r.classList.add("smart-selected"),a.currentItem=e,a._handleButtons(),a.$.fireEvent("change",{oldIndex:n,index:e}))}}},{key:"_unSelectItem",value:function(e){var t=this;if(!t.disabled){var a=e%t.itemsPerPage||0,n=t._currentHtmlItems[a];n.classList.contains("smart-selected")&&n.classList.remove("smart-selected")}}},{key:"_updateButtonsNames",value:function(){for(var e=this,t=["firstButton","lastButton","previousButton","nextButton","previousPageButton","nextPageButton","goToButton"],a=0;a<t.length;a++)e.$[t[a]].content=e._localization[t[a]];e.$.previousEllipsisButton.content=e._localization.ellipsis,e.$.nextEllipsisButton.content=e._localization.ellipsis,e.$.goToInput.placeholder=e._localization.goToInputPlaceholder}},{key:"_updateRange",value:function(e,t){var a=this;e=e||1,t=t||a.itemsPerPage,a.$.range.innerHTML='<span class="smart-range-start">'+e+'</span> <span class="smart-range-hyphen">-</span> <span class="smart-range-end">'+t+'</span><span class="smart-range-prefix">'+a._localization.rangePrefix+'</span> <span class="smart-range-items">'+a.items+'</span> <span class="smart-range-suffix">'+a._localization.rangeSuffix+"</span>"}},{key:"_navigationButtonsClickHandler",value:function(e){var t=this;switch(e.target.closest("smart-button")||e.target.closest("smart-repeat-button")){case t.$.firstButton:t._firstButtonClickHandler(e);break;case t.$.lastButton:t._lastButtonClickHandler(e);break;case t.$.previousButton:t._previousButtonClickHandler(e);break;case t.$.nextButton:t._nextButtonClickHandler(e);break;case t.$.previousPageButton:case t.$.previousEllipsisButton:t._previousPageButtonClickHandler(e);break;case t.$.nextPageButton:case t.$.nextEllipsisButton:t._nextPageButtonClickHandler(e);break;case t.$.goToButton:t._goToButtonClickHandler(e)}}},{key:"_navigationButtonsDownHandler",value:function(e){var t=this,a=e.target.closest("smart-button")||e.target.closest("smart-repeat-button")||e.originalEvent.target.closest(".smart-pager-item");t.disabled||a&&-1!==t.className.indexOf("material")&&Smart.Utilities.Animation.Ripple.animate(a,e.pageX,e.pageY)}}],[{key:"properties",get:function(){return{currentItem:{value:0,type:"number"},currentPage:{value:0,type:"number"},disabledItems:{value:[],type:"array"},ellipsis:{value:!1,type:"boolean"},firstLastButtons:{value:!1,type:"boolean"},goToPage:{value:!1,type:"boolean"},hideItems:{value:!1,type:"boolean"},items:{value:0,type:"number"},itemsPerPage:{value:3,type:"number"},itemTemplate:{value:null,type:"string?"},labelMap:{value:null,type:"object?",reflectToAttribute:!1},localization:{value:null,type:"object?",reflectToAttribute:!1},pagesCount:{value:0,type:"number"},prevNextButtons:{value:!1,type:"boolean"},prevNextPageButtons:{value:!1,type:"boolean"},showRange:{value:!1,type:"boolean"},showRowsCount:{value:!1,type:"boolean"},rowsCountOptions:{value:[],type:"array"}}}},{key:"listeners",get:function(){return{click:"_navigationButtonsClickHandler",down:"_navigationButtonsDownHandler","goToInput.change":"_goToButtonClickHandler","itemsContainer.click":"_itemsContainerClickHandler","itemsPerPageDropDown.change":"_itemsPerPageDropDownChangeHandler",keydown:"_keyDownHandler"}}},{key:"requires",get:function(){return{"Smart.Button":"smart.button.js","Smart.DropDownList":"smart.dropdownlist.js"}}}]),t}(Smart.BaseElement));
//# sourceMappingURL=smart.pager.js.map
